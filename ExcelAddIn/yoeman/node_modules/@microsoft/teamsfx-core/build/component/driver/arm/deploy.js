"use strict";
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
exports.ArmDeployDriver = void 0;
const tslib_1 = require("tslib");
const typedi_1 = require("typedi");
const constant_1 = require("./constant");
const deployImpl_1 = require("./deployImpl");
const wrapUtil_1 = require("../util/wrapUtil");
const localizeUtils_1 = require("../../../common/localizeUtils");
const lib_1 = require("@feathersjs/hooks/lib");
const updateProgress_1 = require("../middleware/updateProgress");
let ArmDeployDriver = class ArmDeployDriver {
    constructor() {
        this.description = localizeUtils_1.getLocalizedString("driver.arm.description.deploy");
    }
    async run(args, context) {
        const wrapContext = new wrapUtil_1.WrapDriverContext(context, constant_1.Constants.actionName, constant_1.Constants.actionName);
        const impl = new deployImpl_1.ArmDeployImpl(args, wrapContext);
        const wrapRes = await wrapUtil_1.wrapRun(wrapContext, () => impl.run());
        return wrapRes;
    }
    async execute(args, ctx) {
        const wrapContext = new wrapUtil_1.WrapDriverContext(ctx, constant_1.Constants.actionName, constant_1.Constants.actionName);
        const impl = new deployImpl_1.ArmDeployImpl(args, wrapContext);
        const wrapRes = await wrapUtil_1.wrapRun(wrapContext, () => impl.run(), true);
        return wrapRes;
    }
};
tslib_1.__decorate([
    lib_1.hooks([updateProgress_1.updateProgress(localizeUtils_1.getLocalizedString("driver.arm.deploy.progressBar.message"))]),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", [Object, Object]),
    tslib_1.__metadata("design:returntype", Promise)
], ArmDeployDriver.prototype, "execute", null);
ArmDeployDriver = tslib_1.__decorate([
    typedi_1.Service(constant_1.Constants.actionName) // DO NOT MODIFY the service name
], ArmDeployDriver);
exports.ArmDeployDriver = ArmDeployDriver;
//# sourceMappingURL=deploy.js.map