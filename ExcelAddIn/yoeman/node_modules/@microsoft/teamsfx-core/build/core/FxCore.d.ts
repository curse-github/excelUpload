import { CoreCallbackEvent, CoreCallbackFunc, Func, FunctionRouter, FxError, Inputs, InputsWithProjectPath, ProjectConfig, ProjectConfigV3, QTreeNode, Result, Settings, Stage, Tools, v2, v3, Void } from "@microsoft/teamsfx-api";
import { CoreHookContext, PreProvisionResForVS, VersionCheckRes } from "./types";
import { FeatureId } from "../component/question";
import "../component/driver/index";
import "../component/driver/script/scriptDriver";
import "reflect-metadata";
import { DriverContext } from "../component/driver/interface/commonArgs";
import { ILifecycle } from "../component/configManager/interface";
import { DotenvParseOutput } from "dotenv";
import { FxCoreV3Implement } from "./FxCoreImplementV3";
export declare class FxCore implements v3.ICore {
    tools: Tools;
    isFromSample?: boolean;
    settingsVersion?: string;
    v3Implement: FxCoreV3Implement;
    constructor(tools: Tools);
    /**
     * @todo this's a really primitive implement. Maybe could use Subscription Model to
     * refactor later.
     */
    on(event: CoreCallbackEvent, callback: CoreCallbackFunc): void;
    /**
     * lifecycle command: create new project
     */
    createProject(inputs: Inputs): Promise<Result<string, FxError>>;
    /**
     * @deprecated  Not used any more but still referenced by CLI code
     */
    initInfra(inputs: Inputs): Promise<Result<undefined, FxError>>;
    /**
     * @deprecated  Not used any more but still referenced by CLI code
     */
    initDebug(inputs: Inputs): Promise<Result<undefined, FxError>>;
    createProjectOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<string, FxError>>;
    /**
     * lifecycle commands: provision
     */
    provisionResources(inputs: Inputs): Promise<Result<Void, FxError>>;
    provisionResourcesOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<Void, FxError>>;
    /**
     * Only used to provision Teams app with user provided app package in CLI
     * @returns teamsAppId on provision success
     */
    provisionTeamsAppForCLI(inputs: Inputs): Promise<Result<string, FxError>>;
    /**
     * lifecycle commands: deploy
     */
    deployArtifacts(inputs: Inputs): Promise<Result<Void, FxError>>;
    deployArtifactsOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<Void, FxError>>;
    localDebug(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * none lifecycle command, v3 only
     */
    deployAadManifest(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * none lifecycle command, v3 only
     */
    addWebpart(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * lifecycle command: publish
     */
    publishApplication(inputs: Inputs): Promise<Result<Void, FxError>>;
    publishApplicationOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<Void, FxError>>;
    /**
     * @deprecated not used in v3 any more
     */
    addFeature(inputs: v2.InputsWithProjectPath, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
    /**
     * most commands will be deprecated in V3
     */
    executeUserTask(func: Func, inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
    executeUserTaskOld(func: Func, inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
    /**
     * v3 only none lifecycle command
     */
    buildAadManifest(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * v3 only none lifecycle command
     */
    deployTeamsManifest(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * v3 only none lifecycle command
     */
    validateApplication(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * v3 only none lifecycle command
     */
    validateManifest(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * v3 only none lifecycle command
     */
    validateAppPackage(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * v3 only none lifecycle command
     */
    createAppPackage(inputs: Inputs): Promise<Result<Void, FxError>>;
    /**
     * get url to preview the app, may prompt to select env, hub and Teams manifest
     * v3 only none lifecycle command
     * @param {Inputs} inputs
     * @returns the url to preview the app
     */
    previewWithManifest(inputs: Inputs): Promise<Result<string, FxError>>;
    /**
     * Warning: this API only works for CLI_HELP, it has no business with interactive run for CLI!
     */
    getQuestions(stage: Stage, inputs: Inputs): Promise<Result<QTreeNode | undefined, FxError>>;
    /**
     * @deprecated
     */
    getQuestionsForAddFeature(featureId: FeatureId, inputs: Inputs): Promise<Result<QTreeNode | undefined, FxError>>;
    getQuestionsForUserTask(func: FunctionRouter, inputs: Inputs): Promise<Result<QTreeNode | undefined, FxError>>;
    /**
     * v3 only API, not command
     */
    getSettings(inputs: InputsWithProjectPath): Promise<Result<Settings, FxError>>;
    /**
     * v3 only API, not command
     */
    getDotEnv(inputs: InputsWithProjectPath): Promise<Result<DotenvParseOutput | undefined, FxError>>;
    /**
     * @deprecated in V3
     */
    getProjectConfig(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<ProjectConfig | undefined, FxError>>;
    /**
     * @deprecated in V3
     */
    getProjectConfigV3(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<ProjectConfigV3 | undefined, FxError>>;
    grantPermission(inputs: Inputs): Promise<Result<Void, FxError>>;
    grantPermissionOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
    /**
     * none lifecycle command
     */
    checkPermission(inputs: Inputs): Promise<Result<Void, FxError>>;
    checkPermissionOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
    /**
     * none lifecycle command
     */
    listCollaborator(inputs: Inputs): Promise<Result<Void, FxError>>;
    listCollaboratorOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
    getSelectedEnv(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<string | undefined, FxError>>;
    encrypt(plaintext: string, inputs: Inputs, ctx?: CoreHookContext): Promise<Result<string, FxError>>;
    decrypt(ciphertext: string, inputs: Inputs, ctx?: CoreHookContext): Promise<Result<string, FxError>>;
    createEnv(inputs: Inputs): Promise<Result<Void, FxError>>;
    createEnvOld(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<Void, FxError>>;
    phantomMigrationV3(inputs: Inputs): Promise<Result<Void, FxError>>;
    projectVersionCheck(inputs: Inputs): Promise<Result<VersionCheckRes, FxError>>;
    createEnvCopy(targetEnvName: string, sourceEnvName: string, inputs: Inputs, core: FxCore): Promise<Result<Void, FxError>>;
    activateEnv(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<Void, FxError>>;
    apply(inputs: Inputs, templatePath: string, lifecycleName: string): Promise<Result<Void, FxError>>;
    runLifecycle(lifecycle: ILifecycle, driverContext: DriverContext, env: string): Promise<Result<Void, FxError>>;
    _init(inputs: Inputs, ctx?: CoreHookContext, isInitExistingApp?: boolean): Promise<Result<string, FxError>>;
    init(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<string, FxError>>;
    preProvisionForVS(inputs: Inputs): Promise<Result<PreProvisionResForVS, FxError>>;
    preCheckYmlAndEnvForVS(inputs: Inputs): Promise<Result<Void, FxError>>;
    publishInDeveloperPortal(inputs: Inputs): Promise<Result<Void, FxError>>;
}
export declare function ensureBasicFolderStructure(inputs: Inputs, createPackageJson?: boolean): Promise<Result<null, FxError>>;
export declare function listCollaboratorFunc(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
export declare function checkPermissionFunc(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
export declare function grantPermissionFunc(inputs: Inputs, ctx?: CoreHookContext): Promise<Result<any, FxError>>;
//# sourceMappingURL=FxCore.d.ts.map